<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CerminMataHo | Premium Eyewear & Contact Lenses</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        body {
            font-family: 'Poppins', sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 100%);
        }
        .product-card {
            transition: all 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
        }
        .header-sticky {
            position: sticky;
            top: 0;
            backdrop-filter: blur(10px);
            z-index: 50;
        }
        #calendar {
            min-height: 500px;
        }
        .form-field:focus-within {
            border-color: #4f46e5;
        }
        .time-slot {
            transition: all 0.2s ease;
        }
        .time-slot:hover {
            background-color: #4f46e5;
            color: white;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Header -->
    <header class="header-sticky bg-white/80 py-4 shadow-sm">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-glasses text-indigo-600 text-3xl"></i>
                <h1 class="text-2xl font-bold">CM<span class="text-indigo-600">Ho</span></h1>
            </div>
            <nav class="hidden md:flex space-x-8">
                <a href="#products" class="font-medium hover:text-indigo-600 transition-colors">Products</a>
                <a href="#services" class="font-medium hover:text-indigo-600 transition-colors">Services</a>
                <a href="#appointment" class="font-medium hover:text-indigo-600 transition-colors">Book Appointment</a>
                <a href="#contact" class="font-medium hover:text-indigo-600 transition-colors">Contact</a>
            </nav>
            <div class="flex items-center space-x-4">
                <button id="cartButton" class="relative">
                    <i class="fas fa-shopping-bag text-xl"></i>
                    <span id="cartCounter" class="absolute -top-2 -right-2 bg-indigo-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center">0</span>
                </button>
                <button class="md:hidden">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="gradient-bg py-16 md:py-24">
        <div class="container mx-auto px-4 text-center fade-in">
            <h1 class="text-4xl md:text-6xl font-bold mb-4">See the World Clearly</h1>
            <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto">Premium eyewear and contact lenses designed for comfort and style. Experience vision perfected.</p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <a href="#appointment" class="bg-indigo-600 text-white px-6 py-3 rounded-full font-medium hover:bg-indigo-700 transition-colors">Book an Eye Test</a>
                <a href="#products" class="border-2 border-indigo-600 text-indigo-600 px-6 py-3 rounded-full font-medium hover:bg-indigo-50 transition-colors">Shop Collection</a>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-16">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12 fade-in">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Our Collections</h2>
                <p class="max-w-2xl mx-auto text-gray-600">Discover our latest eyewear styles and contact lenses that combine fashion with optical precision.</p>
                <div class="flex justify-center mt-8 space-x-2">
                    <button class="filter-btn active" data-filter="all">All Products</button>
                    <button class="filter-btn" data-filter="spectacles">Spectacles</button>
                    <button class="filter-btn" data-filter="lenses">Contact Lenses</button>
                    <button class="filter-btn" data-filter="sunglasses">Sunglasses</button>
                </div>
            </div>
            
            <div id="productsContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                <!-- Products will be dynamically loaded here -->
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-16 bg-gray-100">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12 fade-in">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Our Services</h2>
                <p class="max-w-2xl mx-auto text-gray-600">Comprehensive eye care to meet all your vision needs</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="bg-white rounded-xl p-6 shadow-md text-center">
                    <div class="text-indigo-600 text-4xl mb-4">
                        <i class="fas fa-eye"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-2">Comprehensive Eye Exams</h3>
                    <p class="text-gray-600">Detailed vision assessment using state-of-the-art diagnostic equipment</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-md text-center">
                    <div class="text-indigo-600 text-4xl mb-4">
                        <i class="fas fa-glasses"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-2">Frame Selection</h3>
                    <p class="text-gray-600">Stylist-guided selection for frames that complement your features</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-md text-center">
                    <div class="text-indigo-600 text-4xl mb-4">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-2">Express Lens Services</h3>
                    <p class="text-gray-600">Same-day lens replacement and adjustment services</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-md text-center">
                    <div class="text-indigo-600 text-4xl mb-4">
                        <i class="fas fa-hand-holding-heart"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-2">Contact Lens Fittings</h3>
                    <p class="text-gray-600">Specialized fittings for comfort and optimal vision correction</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Appointment Section -->
    <section id="appointment" class="py-16">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12 fade-in">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Book an Appointment</h2>
                <p class="max-w-2xl mx-auto text-gray-600">Schedule your visit with our certified optometrists</p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-xl font-bold mb-4">Select Date & Time</h3>
                    <div id="calendar" class="mb-6"></div>
                    
                    <div class="mb-6">
                        <h4 class="font-bold mb-4">Available Time Slots</h4>
                        <div id="timeSlots" class="flex flex-wrap gap-3">
                            <!-- Time slots will be dynamically loaded here -->
                        </div>
                    </div>
                    
                    <p class="text-gray-600 text-sm"><i class="fas fa-info-circle mr-2"></i>Appointments are confirmed via email with a calendar invite</p>
                </div>
                
                <div class="bg-indigo-50 rounded-xl shadow-md p-6">
                    <h3 class="text-xl font-bold mb-6">Personal Information</h3>
                    <form id="appointmentForm" class="space-y-6">
                        <div class="form-field bg-white border rounded-lg p-3 focus-within:border-indigo-500">
                            <label class="block text-sm text-gray-600">Full Name</label>
                            <input type="text" required class="w-full outline-none mt-1" placeholder="John Smith">
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="form-field bg-white border rounded-lg p-3 focus-within:border-indigo-500">
                                <label class="block text-sm text-gray-600">Email</label>
                                <input type="email" required class="w-full outline-none mt-1" placeholder="john@example.com">
                            </div>
                            
                            <div class="form-field bg-white border rounded-lg p-3 focus-within:border-indigo-500">
                                <label class="block text-sm text-gray-600">Phone</label>
                                <input type="tel" required class="w-full outline-none mt-1" placeholder="(123) 456-7890">
                            </div>
                        </div>
                        
                        <div id="selectedProductsSection" class="hidden">
                            <h4 class="font-bold mb-3">Selected Products</h4>
                            <div id="selectedProductsList" class="bg-white rounded-lg p-4 mb-4 max-h-40 overflow-y-auto">
                                <!-- Selected products will be shown here -->
                            </div>
                        </div>
                        
                        <div class="form-field bg-white border rounded-lg p-3 focus-within:border-indigo-500">
                            <label class="block text-sm text-gray-600">Reason for Visit</label>
                            <select class="w-full outline-none mt-1">
                                <option>Comprehensive Eye Exam</option>
                                <option>Contact Lens Fitting</option>
                                <option>Frame Selection Assistance</option>
                                <option>Prescription Check-up</option>
                                <option>Other</option>
                            </select>
                        </div>
                        
                        <div class="form-field bg-white border rounded-lg p-3 focus-within:border-indigo-500">
                            <label class="block text-sm text-gray-600">Notes</label>
                            <textarea class="w-full outline-none mt-1 h-24" placeholder="Special requirements or preferences"></textarea>
                        </div>
                        
                        <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 transition-colors">
                            Confirm Appointment
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 bg-gray-100">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12 fade-in">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Visit Our Store</h2>
                <p class="max-w-2xl mx-auto text-gray-600">Experience premium eyewear with personalized service</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-white rounded-xl p-6 shadow-md">
                    <h3 class="font-bold text-xl mb-4">Store Hours</h3>
                    <ul class="space-y-3">
                        <li class="flex justify-between"><span>Monday - Friday:</span> <span>9am - 7pm</span></li>
                        <li class="flex justify-between"><span>Saturday:</span> <span>10am - 6pm</span></li>
                        <li class="flex justify-between"><span>Sunday:</span> <span>11am - 5pm</span></li>
                        <li class="flex justify-between"><span>Holidays:</span> <span>Closed</span></li>
                    </ul>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-md">
                    <h3 class="font-bold text-xl mb-4">Contact Info</h3>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <i class="fas fa-map-marker-alt text-indigo-600 mt-1 mr-3"></i>
                            <span>Somewhere in JRT</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-phone-alt text-indigo-600 mt-1 mr-3"></i>
                            <span>(+60) 12-3456 7890</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-envelope text-indigo-600 mt-1 mr-3"></i>
                            <span>hello@CerminMataHo.com</span>
                        </li>
                    </ul>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-md">
                    <h3 class="font-bold text-xl mb-4">Subscribe</h3>
                    <p class="mb-4 text-gray-600">Be the first to know about new collections and exclusive offers.</p>
                    <form class="flex">
                        <input type="email" placeholder="Your email" class="flex-grow border border-gray-300 rounded-l-lg px-4 py-2">
                        <button class="bg-indigo-600 text-white px-4 rounded-r-lg"><i class="fas fa-paper-plane"></i></button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <i class="fas fa-glasses text-indigo-400 text-2xl"></i>
                        <h2 class="text-2xl font-bold text-white">CM<span class="text-indigo-400">Ho</span></h2>
                    </div>
                    <p class="mb-4">Precision eyewear crafted for style and visual comfort.</p>
                    <div class="flex space-x-4">
                        <a href="#"><i class="fab fa-facebook-f text-xl hover:text-indigo-400 transition-colors"></i></a>
                        <a href="#"><i class="fab fa-instagram text-xl hover:text-indigo-400 transition-colors"></i></a>
                        <a href="#"><i class="fab fa-twitter text-xl hover:text-indigo-400 transition-colors"></i></a>
                        <a href="#"><i class="fab fa-pinterest-p text-xl hover:text-indigo-400 transition-colors"></i></a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-white font-bold text-lg mb-4">Products</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="hover:text-white transition-colors">Spectacles</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Sunglasses</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Contact Lenses</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Lens Solutions</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Accessories</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-white font-bold text-lg mb-4">Services</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="hover:text-white transition-colors">Eye Exams</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Lens Fittings</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Repairs & Adjustments</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Prescription Updates</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Emergency Care</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-white font-bold text-lg mb-4">Customer Care</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="hover:text-white transition-colors">Contact Us</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">FAQs</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Shipping & Returns</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Terms & Conditions</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-12 pt-8 text-center">
                <p>Â© 2023 CerminMataHo. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Shopping Cart Modal -->
    <div id="cartModal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white max-w-lg w-full max-h-[85vh] rounded-lg flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-xl font-bold">Your Selection</h3>
                <button id="closeCart" class="text-2xl">&times;</button>
            </div>
            <div id="cartItems" class="p-6 overflow-y-auto flex-grow">
                <!-- Cart items will be loaded here -->
            </div>
            <div class="p-6 border-t">
                <div class="flex justify-between mb-4">
                    <span class="font-bold">Total Items:</span>
                    <span id="cartTotalQuantity">0</span>
                </div>
                <button id="goToAppointment" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 transition-colors">
                    Proceed to Appointment
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let cart = [];
        let selectedDate = null;
        let selectedTime = null;
        
        // Sample product data (simulating data loaded from spreadsheet)
        const products = [
            { id: 1, name: "Classic Black Frames", price: 129.99, category: "spectacles", description: "Timeless acetate frames with durable hinges", image: "" },
            { id: 2, name: "Air Light Titanium", price: 189.99, category: "spectacles", description: "Ultra-lightweight titanium frames for all-day comfort", image: "" },
            { id: 3, name: "Vintage Tortoise", price: 149.99, category: "spectacles", description: "Handcrafted vintage-inspired frames with gradient lenses", image: "" },
            { id: 4, name: "Daily Contact Lenses (30pk)", price: 39.99, category: "lenses", description: "High oxygen permeability for comfortable daily wear", image: "" },
            { id: 5, name: "Monthly Contact Lenses", price: 59.99, category: "lenses", description: "Premium monthly contacts with UV protection", image: "" },
            { id: 6, name: "Color Contact Lenses", price: 49.99, category: "lenses", description: "Subtle color enhancement lenses with comfort design", image: "" },
            { id: 7, name: "Aviator Sunglasses", price: 159.99, category: "sunglasses", description: "Classic aviator style with polarized lenses", image: "" },
            { id: 8, name: "Wayfarer Classic", price: 139.99, category: "sunglasses", description: "Iconic shape with 100% UV protection", image: "" },
            { id: 9, name: "Sport Polarized", price: 179.99, category: "sunglasses", description: "Wraparound design for active lifestyles", image: "" },
            { id: 10, name: "Modern Square Frames", price: 139.99, category: "spectacles", description: "Contemporary style with anti-glare coating", image: "" },
            { id: 11, name: "Sleek Metal Frames", price: 169.99, category: "spectacles", description: "Minimalist metal frames with flexible nose pads", image: "" },
            { id: 12, name: "Reader Blue Light Glasses", price: 99.99, category: "spectacles", description: "Blue light filtering for digital eye strain", image: "" }
        ];

        // Initialize the application
        function init() {
            renderProducts();
            setupEventListeners();
            setupCalendar();
            renderCart();
            displayTimeSlots();
            
            // Simulate loading products (as if from an external file)
            setTimeout(() => {
                const productElements = document.querySelectorAll('.product-card');
                productElements.forEach(el => el.classList.add('fade-in'));
            }, 300);
        }

        // Render products to the page
        function renderProducts() {
            const container = document.getElementById('productsContainer');
            let html = '';
            
            products.forEach(product => {
                const placeholderColor = `hsl(${product.id * 30}, 50%, 85%)`;
                
                html += `
                    <div class="product-card bg-white rounded-xl shadow-md overflow-hidden transition-all" data-category="${product.category}">
                        <div class="h-48 bg-gray-200 flex items-center justify-center" style="background-color: ${placeholderColor};">
                            <i class="fas fa-glasses text-4xl text-gray-400"></i>
                        </div>
                        <div class="p-4">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-bold text-lg">${product.name}</h3>
                                <span class="font-bold text-indigo-600">$${product.price.toFixed(2)}</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-4">${product.description}</p>
                            <div class="flex justify-between items-center">
                                <button class="bg-gray-100 px-3 py-1 rounded text-sm hover:bg-gray-200" onclick="showProductDetail(${product.id})">
                                    Details
                                </button>
                                <button class="bg-indigo-50 text-indigo-600 px-3 py-1 rounded text-sm hover:bg-indigo-100" onclick="addToCart(${product.id})">
                                    <i class="fas fa-plus mr-1"></i> Select
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Category filter buttons
            document.querySelectorAll('.filter-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const filter = button.dataset.filter;
                    
                    // Update active button
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.toggle('active', btn === button);
                        btn.classList.toggle('bg-indigo-100', btn === button);
                        btn.classList.toggle('text-indigo-700', btn === button);
                    });
                    
                    // Filter products
                    document.querySelectorAll('.product-card').forEach(card => {
                        if (filter === 'all' || card.dataset.category === filter) {
                            card.classList.remove('hidden');
                        } else {
                            card.classList.add('hidden');
                        }
                    });
                });
            });
            
            // Shopping cart
            document.getElementById('cartButton').addEventListener('click', openCart);
            document.getElementById('closeCart').addEventListener('click', closeCart);
            document.getElementById('goToAppointment').addEventListener('click', () => {
                closeCart();
                document.getElementById('appointment').scrollIntoView({behavior: 'smooth'});
            });
            
            // Form submission
            document.getElementById('appointmentForm').addEventListener('submit', submitAppointment);
        }

        // Setup FullCalendar
        function setupCalendar() {
            const calendarEl = document.getElementById('calendar');
            const calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek'
                },
                height: 'auto',
                nowIndicator: true,
                events: [
                    // Simulate blocked dates (holidays)
                    { title: 'Holiday', start: '2023-10-09', allDay: true, color: '#ff9800' },
                    { title: 'Booked', start: '2023-10-05', allDay: true, color: '#e91e63' },
                    { title: 'Booked', start: '2023-10-12', allDay: true, color: '#e91e63' },
                    { title: 'Booked', start: '2023-10-18', allDay: true, color: '#e91e63' }
                ],
                dateClick: function(info) {
                    const today = new Date();
                    today.setHours(0,0,0,0);
                    
                    // Prevent selecting past dates
                    if (info.date < today) {
                        alert('Please select a future date');
                        return;
                    }
                    
                    // Check if date is blocked (holiday or fully booked)
                    const event = calendar.getEvents().find(e => 
                        e.start.toISOString().split('T')[0] === info.dateStr && 
                        (e.title === 'Holiday' || e.title === 'Booked')
                    );
                    
                    if (event && event.title === 'Holiday') {
                        alert('Our office is closed on holidays. Please select another date.');
                        return;
                    }
                    
                    if (event && event.title === 'Booked') {
                        alert('This date is fully booked. Please select another date.');
                        return;
                    }
                    
                    selectedDate = info.date;
                    document.querySelector('.fc-day-today')?.classList.remove('selected-date');
                    document.querySelectorAll(`[data-date="${info.dateStr}"]`).forEach(el => {
                        el.classList.add('selected-date');
                    });
                    
                    // Show timeslots for selected date
                    displayTimeSlots();
                }
            });
            
            calendar.render();
        }

        // Display time slots for selected date
        function displayTimeSlots() {
            const container = document.getElementById('timeSlots');
            
            if (!selectedDate) {
                container.innerHTML = '<p class="text-gray-500">Please select a date on the calendar</p>';
                return;
            }
            
            // Generate time slots (in a real app, this would come from a database/API)
            const slots = ['9:00 AM', '10:30 AM', '12:00 PM', '1:30 PM', '3:00 PM', '4:30 PM'];
            
            let html = '';
            slots.forEach(slot => {
                // Simulate some slots being booked
                const isBooked = Math.random() < 0.3; // 30% chance a slot is booked
                html += `
                    <button 
                        class="time-slot px-4 py-2 rounded-lg border ${isBooked ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-white border-indigo-300 text-indigo-700 hover:bg-indigo-100'}" 
                        ${isBooked ? 'disabled' : ''}
                        onclick="selectTimeSlot('${slot}')"
                    >
                        ${slot}
                    </button>
                `;
            });
            
            container.innerHTML = html;
        }

        // Select a time slot
        function selectTimeSlot(time) {
            selectedTime = time;
            document.querySelectorAll('#timeSlots button').forEach(button => {
                button.classList.remove('bg-indigo-600', 'text-white');
                button.classList.add('bg-white', 'text-indigo-700');
            });
            event.target.classList.add('bg-indigo-600', 'text-white');
            event.target.classList.remove('bg-white', 'text-indigo-700');
        }

        // Add product to cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Check if already in cart
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    quantity: 1
                });
            }
            
            updateCartUI();
            
            // Visual feedback
            const button = event.target;
            button.innerHTML = '<i class="fas fa-check mr-1"></i> Added';
            button.classList.remove('bg-indigo-50');
            button.classList.add('bg-green-100', 'text-green-700');
            
            setTimeout(() => {
                button.innerHTML = '<i class="fas fa-plus mr-1"></i> Select';
                button.classList.remove('bg-green-100', 'text-green-700');
                button.classList.add('bg-indigo-50');
            }, 2000);
        }

        // Update cart UI
        function updateCartUI() {
            // Update badge
            const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCounter').textContent = totalQuantity;
            
            // Render cart items
            const container = document.getElementById('cartItems');
            let html = '';
            
            if (cart.length === 0) {
                html = '<p class="text-gray-500 text-center py-8">Your selection is empty</p>';
            } else {
                cart.forEach(item => {
                    html += `
                        <div class="flex items-center justify-between py-4 border-b">
                            <div>
                                <h4 class="font-medium">${item.name}</h4>
                                <p class="text-gray-600 text-sm">$${item.price.toFixed(2)} x ${item.quantity}</p>
                            </div>
                            <div>
                                <button class="text-gray-400 hover:text-red-500" onclick="removeCartItem(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                });
            }
            
            container.innerHTML = html;
            document.getElementById('cartTotalQuantity').textContent = totalQuantity;
            
            // Update selected products in booking form
            const selectedSection = document.getElementById('selectedProductsSection');
            const selectedList = document.getElementById('selectedProductsList');
            
            if (cart.length > 0) {
                selectedSection.classList.remove('hidden');
                let listHTML = '';
                cart.forEach(item => {
                    listHTML += `<div class="mb-2 last:mb-0 flex justify-between">
                        <span>${item.name}</span>
                        <span class="font-bold">${item.quantity}</span>
                    </div>`;
                });
                selectedList.innerHTML = listHTML;
            } else {
                selectedSection.classList.add('hidden');
            }
        }

        // Remove item from cart
        function removeCartItem(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartUI();
        }

        // Show/hide shopping cart
        function openCart() {
            document.getElementById('cartModal').classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        }

        function closeCart() {
            document.getElementById('cartModal').classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        }

        // Submit appointment form
        function submitAppointment(e) {
            e.preventDefault();
            
            if (!selectedDate || !selectedTime) {
                alert('Please select a date and time for your appointment');
                return;
            }
            
            if (cart.length === 0) {
                const addProducts = confirm('You haven\'t selected any products. Would you like to add some?');
                if (addProducts) {
                    document.getElementById('products').scrollIntoView({behavior: 'smooth'});
                    return;
                }
            }
            
            const form = e.target;
            const formData = {
                name: form.elements[0].value,
                email: form.elements[1].value,
                phone: form.elements[2].value,
                date: selectedDate.toISOString().split('T')[0],
                time: selectedTime,
                reason: form.elements[3].value,
                notes: form.elements[4].value,
                products: [...cart]
            };
            
            // In a real app, we would send this to a backend for email and calendar integration
            console.log('Form submission:', formData);
            
            // Simulate successful booking
            alert('Appointment confirmed! A calendar invite has been sent to your email.');
            
            // Reset form
            form.reset();
            selectedDate = null;
            selectedTime = null;
            cart = [];
            updateCartUI();
            document.getElementById('selectedProductsSection').classList.add('hidden');
            document.getElementById('timeSlots').innerHTML = '<p class="text-gray-500">Please select a date on the calendar</p>';
        }

        // Show product detail (simulated for this demo)
        function showProductDetail(id) {
            alert(`Showing details for product #${id}. In a full implementation, this would open a detailed view with multiple images and specifications.`);
        }

        // Start the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
